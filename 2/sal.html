<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
<span class="DEFINE">#include</span>&nbsp;<span class="COMPARATIONS"><</span><span class="LIBRARY">stdio.h</span><span class="COMPARATIONS">></span>
<br><span class="DEFINE">#include</span>&nbsp;<span class="COMPARATIONS"><</span><span class="LIBRARY">stdlib.h</span><span class="COMPARATIONS">></span>
<br><span class="DEFINE">#include</span>&nbsp;<span class="COMPARATIONS"><</span><span class="LIBRARY">limits.h</span><span class="COMPARATIONS">></span>
<br><span class="DEFINE">#include</span>&nbsp;<span class="COMPARATIONS"><</span><span class="LIBRARY">omp.h</span><span class="COMPARATIONS">></span>
<br>
<br><span class="TYPE_VARIABLES">double</span>&nbsp;<span class="ID">parallel_reduction</span><span class="SPECIALS">(</span><span class="TYPE_VARIABLES">double</span>&nbsp;<span class="MATH_OPERATORS">*</span><span class="ID">x</span><span class="SPECIALS">,</span>&nbsp;<span class="EXT_TYPE_VARIABLES">long</span>&nbsp;<span class="ID">n</span><span class="SPECIALS">,</span>&nbsp;<span class="TYPE_VARIABLES">int</span>&nbsp;<span class="ID">nt</span><span class="SPECIALS">)</span><span class="SPECIALS">{</span>
<br>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="COMMENT">// (1) pensar en paralelismo manual (openmp)</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="TYPE_VARIABLES">double</span>&nbsp;<span class="MATH_OPERATORS">*</span><span class="ID">sumas</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="SPECIALS">(</span><span class="TYPE_VARIABLES">double</span><span class="MATH_OPERATORS">*</span><span class="SPECIALS">)</span><span class="ID">malloc</span><span class="SPECIALS">(</span><span class="RW">sizeof</span><span class="SPECIALS">(</span><span class="TYPE_VARIABLES">double</span><span class="SPECIALS">)</span><span class="MATH_OPERATORS">*</span><span class="ID">nt</span><span class="SPECIALS">)</span><span class="SPECIALS">;</span>
<br>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="DEFINE">#pragma</span>&nbsp;<span class="ID">omp</span>&nbsp;<span class="ID">parallel</span>&nbsp;<span class="ID">shared</span><span class="SPECIALS">(</span><span class="ID">sumas</span><span class="SPECIALS">)</span>
<br>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="SPECIALS">{</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="TYPE_VARIABLES">int</span>&nbsp;<span class="ID">tid</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="ID">omp_get_thread_num</span><span class="SPECIALS">(</span><span class="SPECIALS">)</span><span class="SPECIALS">;</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="TYPE_VARIABLES">int</span>&nbsp;<span class="ID">chunk</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="SPECIALS">(</span><span class="ID">n</span>&nbsp;<span class="MATH_OPERATORS">+</span>&nbsp;<span class="ID">nt</span>&nbsp;<span class="MATH_OPERATORS">-</span>&nbsp;<span class="INT">1</span><span class="SPECIALS">)</span><span class="MATH_OPERATORS">/</span><span class="ID">nt</span><span class="SPECIALS">;</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="TYPE_VARIABLES">int</span>&nbsp;<span class="ID">start</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="ID">tid</span><span class="MATH_OPERATORS">*</span><span class="ID">chunk</span><span class="SPECIALS">;</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="TYPE_VARIABLES">int</span>&nbsp;<span class="ID">end</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="ID">tid</span><span class="MATH_OPERATORS">*</span><span class="ID">chunk</span>&nbsp;<span class="MATH_OPERATORS">+</span>&nbsp;<span class="ID">chunk</span><span class="SPECIALS">;</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="COMMENT">//printf("soy thread %i trabajo desde %i hasta %i\n", tid, start, end);</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="COMMENT">// fase (1), la parte n/p</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="TYPE_VARIABLES">double</span>&nbsp;<span class="ID">lsum</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="FLOAT">0.0</span><span class="ID">f</span><span class="SPECIALS">;</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="CICLES">for</span><span class="SPECIALS">(</span><span class="TYPE_VARIABLES">int</span>&nbsp;<span class="ID">i</span><span class="ASSIGNATION">=</span><span class="ID">start</span><span class="SPECIALS">;</span>&nbsp;<span class="ID">i</span><span class="COMPARATIONS"><</span><span class="ID">end</span>&nbsp;<span class="COMPARATIONS">&&</span>&nbsp;<span class="ID">i</span><span class="COMPARATIONS"><</span><span class="ID">n</span><span class="SPECIALS">;</span>&nbsp;<span class="MATH_OPERATORS">+</span><span class="MATH_OPERATORS">+</span><span class="ID">i</span><span class="SPECIALS">)</span><span class="SPECIALS">{</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ID">lsum</span>&nbsp;<span class="ASSIGNATION">+=</span>&nbsp;<span class="ID">x</span><span class="SPECIALS">[</span><span class="ID">i</span><span class="SPECIALS">]</span><span class="SPECIALS">;</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="SPECIALS">}</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ID">sumas</span><span class="SPECIALS">[</span><span class="ID">tid</span><span class="SPECIALS">]</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="ID">lsum</span><span class="SPECIALS">;</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="COMMENT">// esperamos que todos pongan su valor en sumas</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="DEFINE">#pragma</span>&nbsp;<span class="ID">omp</span>&nbsp;<span class="ID">barrier</span>
<br>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="COMMENT">// fase (2), reducir arreglo sumas[]</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="TYPE_VARIABLES">int</span>&nbsp;<span class="ID">l</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="ID">nt</span><span class="MATH_OPERATORS">/</span><span class="INT">2</span><span class="SPECIALS">;</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="COMMENT">// nt = 4</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="COMMENT">// l = 2</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="COMMENT">// tid: [0,1,2,3]</span>
<br>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="COMMENT">// por que no se hace suma secuencial?</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="COMMENT">// for i = 1 to n_t: red += sum[i]</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="CICLES">while</span><span class="SPECIALS">(</span><span class="ID">l</span>&nbsp;<span class="COMPARATIONS">></span>&nbsp;<span class="INT">0</span><span class="SPECIALS">)</span><span class="SPECIALS">{</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="CONDITIONALS">if</span><span class="SPECIALS">(</span><span class="ID">tid</span>&nbsp;<span class="COMPARATIONS"><</span>&nbsp;<span class="ID">l</span><span class="SPECIALS">)</span><span class="SPECIALS">{</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ID">sumas</span><span class="SPECIALS">[</span><span class="ID">tid</span><span class="SPECIALS">]</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="ID">sumas</span><span class="SPECIALS">[</span><span class="ID">tid</span><span class="SPECIALS">]</span>&nbsp;<span class="MATH_OPERATORS">+</span>&nbsp;<span class="ID">sumas</span><span class="SPECIALS">[</span><span class="ID">tid</span><span class="MATH_OPERATORS">+</span><span class="ID">l</span><span class="SPECIALS">]</span><span class="SPECIALS">;</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="COMMENT">// tid = 0</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="COMMENT">// tid = 1</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="COMMENT">// sumas[0] = sumas[0] + sumas[0+2 = 2]</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="COMMENT">// sumas[1] = sumas[1] + sumas[1+2 = 3]</span>
<br>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="COMMENT">// tid = 0</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="COMMENT">// sumas[0] = sumas[0] + sumas[0+1 = 1]</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="SPECIALS">}</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ID">l</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="ID">l</span><span class="MATH_OPERATORS">/</span><span class="INT">2</span><span class="SPECIALS">;</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="COMMENT">// l = 2/1 = 1</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="COMMENT">// l = 1/2 = 0</span>
<br>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="DEFINE">#pragma</span>&nbsp;<span class="ID">omp</span>&nbsp;<span class="ID">barrier</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="SPECIALS">}</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="SPECIALS">}</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="RW">return</span>&nbsp;<span class="ID">sumas</span><span class="SPECIALS">[</span><span class="INT">0</span><span class="SPECIALS">]</span><span class="SPECIALS">;</span>
<br><span class="SPECIALS">}</span>
<br>
<br><span class="TYPE_VARIABLES">int</span>&nbsp;<span class="RW">main</span><span class="SPECIALS">(</span><span class="TYPE_VARIABLES">int</span>&nbsp;<span class="ID">argc</span><span class="SPECIALS">,</span>&nbsp;<span class="TYPE_VARIABLES">char</span><span class="MATH_OPERATORS">*</span><span class="MATH_OPERATORS">*</span>&nbsp;<span class="ID">argv</span><span class="SPECIALS">)</span><span class="SPECIALS">{</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="CONDITIONALS">if</span><span class="SPECIALS">(</span><span class="ID">argc</span>&nbsp;<span class="COMPARATIONS">!=</span>&nbsp;<span class="INT">3</span><span class="SPECIALS">)</span><span class="SPECIALS">{</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="RW">fprintf</span><span class="SPECIALS">(</span><span class="ID">stderr</span><span class="SPECIALS">,</span>&nbsp;<span class="SPECIALS">"</span><span class="ID">run</span>&nbsp;<span class="ID">as</span>&nbsp;<span class="SPECIALS">.</span><span class="MATH_OPERATORS">/</span><span class="ID">prog</span>&nbsp;<span class="ID">n</span>&nbsp;<span class="ID">nt</span><span class="SPECIALS">\</span><span class="ID">n</span><span class="SPECIALS">"</span><span class="SPECIALS">)</span><span class="SPECIALS">;</span>
<br>	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="RW">exit</span><span class="SPECIALS">(</span><span class="ID">EXIT_FAILURE</span><span class="SPECIALS">)</span><span class="SPECIALS">;</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="SPECIALS">}</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="TYPE_VARIABLES">int</span>&nbsp;<span class="ID">N</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="ID">atoi</span><span class="SPECIALS">(</span><span class="ID">argv</span><span class="SPECIALS">[</span><span class="INT">1</span><span class="SPECIALS">]</span><span class="SPECIALS">)</span><span class="SPECIALS">;</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="TYPE_VARIABLES">int</span>&nbsp;<span class="ID">nt</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="ID">atoi</span><span class="SPECIALS">(</span><span class="ID">argv</span><span class="SPECIALS">[</span><span class="INT">2</span><span class="SPECIALS">]</span><span class="SPECIALS">)</span><span class="SPECIALS">;</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ID">omp_set_num_threads</span><span class="SPECIALS">(</span><span class="ID">nt</span><span class="SPECIALS">)</span><span class="SPECIALS">;</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="TYPE_VARIABLES">double</span>&nbsp;<span class="ID">sum</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="FLOAT">0.0</span><span class="SPECIALS">,</span>&nbsp;<span class="MATH_OPERATORS">*</span><span class="ID">x</span><span class="SPECIALS">;</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ID">x</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="SPECIALS">(</span><span class="TYPE_VARIABLES">double</span><span class="MATH_OPERATORS">*</span><span class="SPECIALS">)</span><span class="ID">malloc</span><span class="SPECIALS">(</span><span class="RW">sizeof</span><span class="SPECIALS">(</span><span class="TYPE_VARIABLES">double</span><span class="SPECIALS">)</span><span class="MATH_OPERATORS">*</span><span class="ID">N</span><span class="SPECIALS">)</span><span class="SPECIALS">;</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="CICLES">for</span><span class="SPECIALS">(</span><span class="TYPE_VARIABLES">int</span>&nbsp;<span class="ID">i</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="INT">0</span><span class="SPECIALS">;</span>&nbsp;<span class="ID">i</span>&nbsp;<span class="COMPARATIONS"><</span>&nbsp;<span class="ID">N</span><span class="SPECIALS">;</span>&nbsp;<span class="MATH_OPERATORS">+</span><span class="MATH_OPERATORS">+</span><span class="ID">i</span><span class="SPECIALS">)</span><span class="SPECIALS">{</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ID">x</span><span class="SPECIALS">[</span><span class="ID">i</span><span class="SPECIALS">]</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="SPECIALS">(</span><span class="TYPE_VARIABLES">double</span><span class="SPECIALS">)</span><span class="ID">rand</span><span class="SPECIALS">(</span><span class="SPECIALS">)</span><span class="MATH_OPERATORS">/</span><span class="SPECIALS">(</span><span class="TYPE_VARIABLES">double</span><span class="SPECIALS">)</span><span class="ID">RAND_MAX</span><span class="SPECIALS">;</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="SPECIALS">}</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="TYPE_VARIABLES">double</span>&nbsp;<span class="ID">t1</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="ID">omp_get_wtime</span><span class="SPECIALS">(</span><span class="SPECIALS">)</span><span class="SPECIALS">;</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="CICLES">for</span><span class="SPECIALS">(</span><span class="TYPE_VARIABLES">int</span>&nbsp;<span class="ID">i</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="INT">0</span><span class="SPECIALS">;</span>&nbsp;<span class="ID">i</span>&nbsp;<span class="COMPARATIONS"><</span>&nbsp;<span class="ID">N</span><span class="SPECIALS">;</span>&nbsp;<span class="MATH_OPERATORS">+</span><span class="MATH_OPERATORS">+</span><span class="ID">i</span><span class="SPECIALS">)</span><span class="SPECIALS">{</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ID">sum</span>&nbsp;<span class="ASSIGNATION">+=</span>&nbsp;<span class="ID">x</span><span class="SPECIALS">[</span><span class="ID">i</span><span class="SPECIALS">]</span><span class="SPECIALS">;</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="SPECIALS">}</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="TYPE_VARIABLES">double</span>&nbsp;<span class="ID">t2</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="ID">omp_get_wtime</span><span class="SPECIALS">(</span><span class="SPECIALS">)</span><span class="SPECIALS">;</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="TYPE_VARIABLES">double</span>&nbsp;<span class="ID">tseq</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="ID">t2</span><span class="MATH_OPERATORS">-</span><span class="ID">t1</span><span class="SPECIALS">;</span>
<br>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ID">t1</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="ID">omp_get_wtime</span><span class="SPECIALS">(</span><span class="SPECIALS">)</span><span class="SPECIALS">;</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="TYPE_VARIABLES">double</span>&nbsp;<span class="ID">psum</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="ID">parallel_reduction</span><span class="SPECIALS">(</span><span class="ID">x</span><span class="SPECIALS">,</span>&nbsp;<span class="ID">N</span><span class="SPECIALS">,</span>&nbsp;<span class="ID">nt</span><span class="SPECIALS">)</span><span class="SPECIALS">;</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ID">t2</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="ID">omp_get_wtime</span><span class="SPECIALS">(</span><span class="SPECIALS">)</span><span class="SPECIALS">;</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="TYPE_VARIABLES">double</span>&nbsp;<span class="ID">tpar</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="ID">t2</span><span class="MATH_OPERATORS">-</span><span class="ID">t1</span><span class="SPECIALS">;</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ID">free</span><span class="SPECIALS">(</span><span class="ID">x</span><span class="SPECIALS">)</span><span class="SPECIALS">;</span>
<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ID">printf</span><span class="SPECIALS">(</span><span class="SPECIALS">"</span><span class="ID">sum</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="MATH_OPERATORS">%</span><span class="ID">f</span>&nbsp;<span class="SPECIALS">(</span><span class="MATH_OPERATORS">%</span><span class="ID">f</span>&nbsp;<span class="ID">secs</span><span class="SPECIALS">)</span><span class="SPECIALS">\</span><span class="ID">npsum</span>&nbsp;<span class="ASSIGNATION">=</span>&nbsp;<span class="MATH_OPERATORS">%</span><span class="ID">f</span>&nbsp;<span class="SPECIALS">(</span><span class="MATH_OPERATORS">%</span><span class="ID">f</span>&nbsp;<span class="ID">secs</span><span class="SPECIALS">)</span><span class="SPECIALS">\</span><span class="ID">nDONE</span><span class="SPECIALS">\</span><span class="ID">n</span><span class="SPECIALS">"</span><span class="SPECIALS">,</span>&nbsp;<span class="ID">sum</span><span class="SPECIALS">,</span>&nbsp;<span class="ID">tseq</span><span class="SPECIALS">,</span>&nbsp;<span class="ID">psum</span><span class="SPECIALS">,</span>&nbsp;<span class="ID">tpar</span><span class="SPECIALS">)</span><span class="SPECIALS">;</span>
<br><span class="SPECIALS">}</span>
</body>
</html>
